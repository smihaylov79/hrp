{% extends 'base.html' %}

{% block content %}

    <nav class="nav nav-pills mb-4 justify-content-center">
    <a class="nav-link" href="{% url 'finance_home' %}">ğŸ“Š ĞĞ°Ñ‡Ğ°Ğ»Ğ¾</a>
        <a class="nav-link" href="{% url 'trade' %}">ğŸ’± Ğ¢ÑŠÑ€Ğ³Ğ¾Ğ²Ğ¸Ñ</a>
        <a class="nav-link" href="{% url 'invest' %}">ğŸŒ± Ğ˜Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸Ğ¸</a>
    <a class="nav-link" href="{% url 'news' %}">ğŸ“° ĞĞ¾Ğ²Ğ¸Ğ½Ğ¸</a>
    <a class="nav-link" href="{% url 'markets' %}">ğŸ’¹ ĞŸĞ°Ğ·Ğ°Ñ€Ğ¸</a>
    <a class="nav-link" href="{% url 'portfolio' %}">ğŸ’¼ ĞŸĞ¾Ñ€Ñ‚Ñ„ĞµĞ¹Ğ»</a>
    <a class="nav-link" href="{% url 'screener' %}">ğŸ” Ğ Ğ°Ğ´Ğ°Ñ€</a>
  </nav>

    <div class="text-center mb-3" id="server-status">
  <span class="badge bg-secondary">ğŸ”„ Checking server status...</span>
</div>


    {% block finance_navigation %}

        {% endblock %}

    <script>console.log("Ping URL:", "{{ fastapi_url }}");</script>

   <script>
  document.addEventListener("DOMContentLoaded", function () {
    async function checkServerStatus() {
  const fastapiUrl = "{{ fastapi_url }}";  // Injected via context processor

  try {
    const response = await fetch(fastapiUrl);

    if (response.ok) {
      document.getElementById("server-status").innerHTML =
        '<span class="badge bg-success">ğŸŸ¢ Server is online</span>';
    } else {
      throw new Error("Unexpected status code: " + response.status);
    }

  } catch (error) {
    console.error("Fetch error:", error);
    document.getElementById("server-status").innerHTML =
      '<span class="badge bg-danger">ğŸ”´ Server is offline</span>';
  }
}
    checkServerStatus();
  });
</script>

{% endblock %}